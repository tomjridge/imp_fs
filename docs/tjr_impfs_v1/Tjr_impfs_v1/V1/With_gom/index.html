<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>With_gom (tjr_impfs_v1.Tjr_impfs_v1.V1.With_gom)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../index.html">tjr_impfs_v1</a> &#x00BB; <a href="../../index.html">Tjr_impfs_v1</a> &#x00BB; <a href="../index.html">V1</a> &#x00BB; With_gom</nav><h1>Module <code>V1.With_gom</code></h1><p>NOTE Instantiate this after gom_btree has been initialized</p></header><h3 class="heading">Parameters</h3><ul></ul><h3 class="heading">Signature</h3><dl><dt class="spec value" id="val-blk_dev_ops"><a href="#val-blk_dev_ops" class="anchor"></a><code><span class="keyword">val</span> blk_dev_ops : <span><span>(Tjr_fs_shared.Std_types.blk_id, Tjr_fs_shared.Std_types.blk, Tjr_fs_shared.Std_types.t)</span> Tjr_fs_shared.blk_dev_ops</span></code></dt><dt class="spec value" id="val-blk_alloc"><a href="#val-blk_alloc" class="anchor"></a><code><span class="keyword">val</span> blk_alloc : <span><span>(Tjr_fs_shared.Std_types.blk_id, Tjr_fs_shared.Std_types.t)</span> Tjr_fs_shared.blk_allocator_ops</span></code></dt><dt class="spec value" id="val-gom_btree"><a href="#val-gom_btree" class="anchor"></a><code><span class="keyword">val</span> gom_btree : <span><span>(<a href="../Gom/index.html#type-k">Gom.k</a>, <a href="../Gom/index.html#type-v">Gom.v</a>, <a href="../S0/index.html#type-t">S0.t</a>)</span> <a href="../index.html#type-uncached_btree">uncached_btree</a></span></code></dt><dt class="spec value" id="val-gom_find_opt"><a href="#val-gom_find_opt" class="anchor"></a><code><span class="keyword">val</span> gom_find_opt : <a href="../Gom/index.html#type-k">Gom.k</a> <span>&#45;&gt;</span> <span><span>(<span><a href="../Gom/index.html#type-v">Gom.v</a> option</span>, <a href="../S0/index.html#type-t">S0.t</a>)</span> Tjr_monad.m</span></code></dt><dt class="spec value" id="val-gom_find"><a href="#val-gom_find" class="anchor"></a><code><span class="keyword">val</span> gom_find : <a href="../Gom/index.html#type-k">Gom.k</a> <span>&#45;&gt;</span> <span><span>(<a href="../Gom/index.html#type-v">Gom.v</a>, <a href="../S0/index.html#type-t">S0.t</a>)</span> Tjr_monad.m</span></code></dt><dt class="spec value" id="val-gom_insert"><a href="#val-gom_insert" class="anchor"></a><code><span class="keyword">val</span> gom_insert : <a href="../Gom/index.html#type-k">Gom.k</a> <span>&#45;&gt;</span> <a href="../Gom/index.html#type-v">Gom.v</a> <span>&#45;&gt;</span> <span><span>(unit, <a href="../S0/index.html#type-t">S0.t</a>)</span> Tjr_monad.m</span></code></dt><dt class="spec value" id="val-gom_delete"><a href="#val-gom_delete" class="anchor"></a><code><span class="keyword">val</span> gom_delete : <a href="../Gom/index.html#type-k">Gom.k</a> <span>&#45;&gt;</span> <span><span>(unit, <a href="../S0/index.html#type-t">S0.t</a>)</span> Tjr_monad.m</span></code></dt></dl><aside><p>In order to incorporate path resolution, we need to be able to lookup an entry in a directory</p></aside><div class="spec module" id="module-Make_root_blk_ops"><a href="#module-Make_root_blk_ops" class="anchor"></a><code><span class="keyword">module</span> <a href="Make_root_blk_ops/index.html">Make_root_blk_ops</a> : <span class="keyword">functor</span> (<a href="Make_root_blk_ops/argument-1-S/index.html">S</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span>) <span>&#45;&gt;</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Dir"><a href="#module-Dir" class="anchor"></a><code><span class="keyword">module</span> <a href="Dir/index.html">Dir</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-resolve_path"><a href="#val-resolve_path" class="anchor"></a><code><span class="keyword">val</span> resolve_path : <span>follow_last_symlink:Tjr_path_resolution.follow_last_symlink</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(<span><span>(<a href="../S0/index.html#type-fid">S0.fid</a>, <a href="../S0/index.html#type-did">S0.did</a>)</span> Tjr_path_resolution.resolved_path_or_err</span>, <a href="../S0/index.html#type-t">S0.t</a>)</span> Tjr_monad.m</span></code></dt><dt class="spec value" id="val-dirs"><a href="#val-dirs" class="anchor"></a><code><span class="keyword">val</span> dirs : <a href="../Make/S1/index.html#type-dirs_ops">S1.dirs_ops</a></code></dt><dd><p>The dirs ops, find and delete FIXME these need to be maintained in a pool, and only one instance per id</p></dd></dl><div class="spec module" id="module-File"><a href="#module-File" class="anchor"></a><code><span class="keyword">module</span> <a href="File/index.html">File</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec module" id="module-Files"><a href="#module-Files" class="anchor"></a><code><span class="keyword">module</span> <a href="Files/index.html">Files</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>The files ops</p></dd></dl><dl><dt class="spec value" id="val-files"><a href="#val-files" class="anchor"></a><code><span class="keyword">val</span> files : <a href="../Make/S1/index.html#type-files_ops">S1.files_ops</a></code></dt><dt class="spec value" id="val-extra"><a href="#val-extra" class="anchor"></a><code><span class="keyword">val</span> extra : <a href="../Make/S1/index.html#type-extra_ops">S1.extra_ops</a></code></dt><dd><p>Extra ops</p></dd></dl><aside><p>create_dir, create_file and create_symlink</p></aside><dl><dt class="spec value" id="val-create_file"><a href="#val-create_file" class="anchor"></a><code><span class="keyword">val</span> create_file : <span>parent:<a href="../S0/index.html#type-did">S0.did</a></span> <span>&#45;&gt;</span> <span>name:Tjr_fs_shared.str_256</span> <span>&#45;&gt;</span> <span>times:<a href="../../../Tjr_impfs_v1__Generic/index.html#type-stat_times">Tjr_impfs_v1__Generic.stat_times</a></span> <span>&#45;&gt;</span> <span><span>(unit, <a href="../S0/index.html#type-t">S0.t</a>)</span> Tjr_monad.m</span></code></dt><dt class="spec value" id="val-create_dir"><a href="#val-create_dir" class="anchor"></a><code><span class="keyword">val</span> create_dir : <span>parent:<a href="../S0/index.html#type-did">S0.did</a></span> <span>&#45;&gt;</span> <span>name:Tjr_fs_shared.str_256</span> <span>&#45;&gt;</span> <span>times:<a href="../../Generic/index.html#type-stat_times">G.stat_times</a></span> <span>&#45;&gt;</span> <span><span>(unit, Tjr_fs_shared.Std_types.t)</span> Tjr_monad.m</span></code></dt></dl><div class="spec module" id="module-Symlink"><a href="#module-Symlink" class="anchor"></a><code><span class="keyword">module</span> <a href="Symlink/index.html">Symlink</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-create_symlink"><a href="#val-create_symlink" class="anchor"></a><code><span class="keyword">val</span> create_symlink : <span>parent:<a href="../S0/index.html#type-did">S0.did</a></span> <span>&#45;&gt;</span> <span>name:Tjr_fs_shared.str_256</span> <span>&#45;&gt;</span> <span>times:<span class="type-var">'a</span></span> <span>&#45;&gt;</span> <span>contents:Tjr_fs_shared.Str_256.str_256</span> <span>&#45;&gt;</span> <span><span>(unit, Tjr_fs_shared.Std_types.t)</span> Tjr_monad.m</span></code></dt><dt class="spec value" id="val-read_symlink"><a href="#val-read_symlink" class="anchor"></a><code><span class="keyword">val</span> read_symlink : <a href="../S0/index.html#type-sid">S0.sid</a> <span>&#45;&gt;</span> <span><span>(Tjr_fs_shared.Str_256.str_256, <a href="../S0/index.html#type-t">S0.t</a>)</span> Tjr_monad.m</span></code></dt></dl><dl><dt class="spec module" id="module-X"><a href="#module-X" class="anchor"></a><code><span class="keyword">module</span> <a href="X/index.html">X</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd></dd></dl><div class="spec module" id="module-The_filesystem"><a href="#module-The_filesystem" class="anchor"></a><code><span class="keyword">module</span> <a href="The_filesystem/index.html">The_filesystem</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></div></body></html>